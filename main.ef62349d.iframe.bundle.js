(self.webpackChunk_holochain_open_dev_peer_status_dev=self.webpackChunk_holochain_open_dev_peer_status_dev||[]).push([[179],{"./.storybook/preview.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,parameters:()=>parameters});var dist=__webpack_require__("./node_modules/@storybook/web-components/dist/index.mjs");const custom_elements_namespaceObject=JSON.parse('{"schemaVersion":"1.0.0","readme":"","modules":[{"kind":"javascript-module","path":"src/config.ts","declarations":[{"kind":"variable","name":"defaultConfig","type":{"text":"PeerStatusConfig"},"default":"{\\n  pingIntervalMs: 2000,\\n  onlineThresholdMs: 5000,\\n  idleThresholdMs: 20000,\\n}"}],"exports":[{"kind":"js","name":"defaultConfig","declaration":{"name":"defaultConfig","module":"src/config.ts"}}]},{"kind":"javascript-module","path":"src/context.ts","declarations":[{"kind":"variable","name":"peerStatusStoreContext"}],"exports":[{"kind":"js","name":"peerStatusStoreContext","declaration":{"name":"peerStatusStoreContext","module":"src/context.ts"}}]},{"kind":"javascript-module","path":"src/index.ts","declarations":[],"exports":[{"kind":"js","name":"*","declaration":{"name":"*","package":"\\"./context\\""}},{"kind":"js","name":"*","declaration":{"name":"*","package":"\\"./elements/peer-status\\""}},{"kind":"js","name":"*","declaration":{"name":"*","package":"\\"./elements/peer-status-context\\""}},{"kind":"js","name":"*","declaration":{"name":"*","package":"\\"./elements/avatar-with-status\\""}},{"kind":"js","name":"*","declaration":{"name":"*","package":"\\"./elements/list-agents-by-status\\""}},{"kind":"js","name":"*","declaration":{"name":"*","package":"\\"./peer-status-client\\""}},{"kind":"js","name":"*","declaration":{"name":"*","package":"\\"./peer-status-store\\""}},{"kind":"js","name":"*","declaration":{"name":"*","package":"\\"./config\\""}}]},{"kind":"javascript-module","path":"src/mocks.ts","declarations":[{"kind":"class","description":"","name":"PeerStatusZomeMock","members":[{"kind":"method","name":"ping","parameters":[{"name":"_agents","type":{"text":"AgentPubKey[]"}}]}],"superclass":{"name":"ZomeMock","package":"@holochain-open-dev/utils"}}],"exports":[{"kind":"js","name":"PeerStatusZomeMock","declaration":{"name":"PeerStatusZomeMock","module":"src/mocks.ts"}}]},{"kind":"javascript-module","path":"src/peer-status-client.ts","declarations":[{"kind":"class","description":"","name":"PeerStatusClient","members":[{"kind":"method","name":"on","return":{"type":{"text":"UnsubscribeFunction"}},"parameters":[{"name":"eventName","type":{"text":"Name | readonly Name[]"}},{"name":"listener","type":{"text":"(eventData: PeerStatusEvents[Name]) => void | Promise<void>"}}]},{"kind":"method","name":"ping","return":{"type":{"text":"Promise<void>"}},"parameters":[{"name":"agentPubKeys","type":{"text":"AgentPubKey[]"}}],"description":"Ping all given agents, expecting for their pong later"},{"kind":"method","name":"callZome","privacy":"private","parameters":[{"name":"fn_name","type":{"text":"string"}},{"name":"payload","type":{"text":"any"}}]}]}],"exports":[{"kind":"js","name":"PeerStatusClient","declaration":{"name":"PeerStatusClient","module":"src/peer-status-client.ts"}}]},{"kind":"javascript-module","path":"src/peer-status-store.ts","declarations":[{"kind":"class","description":"","name":"PeerStatusStore","members":[{"kind":"field","name":"config","type":{"text":"PeerStatusConfig"}},{"kind":"field","name":"agentsLastSeen","default":"new LazyHoloHashMap((agent: AgentPubKey) =>\\n    readable<number | undefined>(undefined, (set) => {\\n      const interval = setInterval(\\n        () => this.client.ping([agent]),\\n        this.config.pingIntervalMs\\n      );\\n      const unsubscribe = this.client.on(\\"signal\\", (peerStatusSignal) => {\\n        if (\\n          peerStatusSignal.type === \\"Pong\\" &&\\n          peerStatusSignal.from_agent.toString() === agent.toString()\\n        ) {\\n          set(Date.now());\\n        }\\n      });\\n\\n      return () => {\\n        clearInterval(interval);\\n        unsubscribe();\\n      };\\n    })\\n  )"},{"kind":"field","name":"agentsStatus"}]}],"exports":[{"kind":"js","name":"PeerStatusStore","declaration":{"name":"PeerStatusStore","module":"src/peer-status-store.ts"}}]},{"kind":"javascript-module","path":"src/types.ts","declarations":[],"exports":[]},{"kind":"javascript-module","path":"test/mocks/index.js","declarations":[{"kind":"function","name":"getAppWebsocket"}],"exports":[{"kind":"js","name":"getAppWebsocket","declaration":{"name":"getAppWebsocket","module":"test/mocks/index.js"}}]},{"kind":"javascript-module","path":"test/mocks/status.mock.js","declarations":[{"kind":"class","description":"","name":"StatusMock","members":[{"kind":"method","name":"create_status","parameters":[{"name":"{ username }"},{"name":"provenance"}]},{"kind":"method","name":"search_statuss","parameters":[{"name":"{ username_prefix }"}]},{"kind":"method","name":"get_my_status","parameters":[{"name":"_"},{"name":"provenance"}]},{"kind":"method","name":"get_agent_status","parameters":[{"name":"{ agent_address }"}]},{"kind":"method","name":"findAgent","parameters":[{"name":"agent_address"}]},{"kind":"field","name":"agents","type":{"text":"array"},"default":"[]"}]}],"exports":[{"kind":"js","name":"StatusMock","declaration":{"name":"StatusMock","module":"test/mocks/status.mock.js"}}]},{"kind":"javascript-module","path":"src/definitions/avatar-with-status.ts","declarations":[{"kind":"class","description":"","name":"AWS","superclass":{"name":"AvatarWithStatus","module":"/src/elements/avatar-with-status"},"tagName":"avatar-with-status","customElement":true,"attributes":[{"name":"agentPubKey","type":{"text":"AgentPubKey"},"description":"REQUIRED. The public key identifying the agent whose presence is going to be shown.","fieldName":"agentPubKey","inheritedFrom":{"name":"AvatarWithStatus","module":"src/elements/avatar-with-status.ts"}}],"members":[{"kind":"field","name":"agentPubKey","type":{"text":"AgentPubKey"},"description":"REQUIRED. The public key identifying the agent whose presence is going to be shown.","attribute":"agentPubKey","inheritedFrom":{"name":"AvatarWithStatus","module":"src/elements/avatar-with-status.ts"}},{"kind":"field","name":"scopedElements","static":true,"inheritedFrom":{"name":"AvatarWithStatus","module":"src/elements/avatar-with-status.ts"}}]}],"exports":[{"kind":"custom-element-definition","name":"avatar-with-status","declaration":{"name":"AWS","module":"src/definitions/avatar-with-status.ts"}}]},{"kind":"javascript-module","path":"src/definitions/list-agents-by-status.ts","declarations":[{"kind":"class","description":"","name":"LABS","superclass":{"name":"ListAgentsByStatus","module":"/src/elements/list-agents-by-status"},"tagName":"list-agents-by-status","customElement":true,"attributes":[{"name":"agents","type":{"text":"AgentPubKey[]"},"description":"REQUIRED. The public keys identifying the agents whose presence is going to be shown.","fieldName":"agents","inheritedFrom":{"name":"ListAgentsByStatus","module":"src/elements/list-agents-by-status.ts"}}],"members":[{"kind":"field","name":"agents","type":{"text":"AgentPubKey[]"},"description":"REQUIRED. The public keys identifying the agents whose presence is going to be shown.","attribute":"agents","inheritedFrom":{"name":"ListAgentsByStatus","module":"src/elements/list-agents-by-status.ts"}},{"kind":"method","name":"renderOnlineAgents","parameters":[{"name":"profiles","type":{"text":"ReadonlyMap<AgentPubKey, Profile | undefined>"}},{"name":"agentPubKeys","type":{"text":"AgentPubKey[]"}}],"inheritedFrom":{"name":"ListAgentsByStatus","module":"src/elements/list-agents-by-status.ts"}},{"kind":"method","name":"renderOfflineAgents","parameters":[{"name":"profiles","type":{"text":"ReadonlyMap<AgentPubKey, Profile | undefined>"}},{"name":"agentPubKeys","type":{"text":"AgentPubKey[]"}}],"inheritedFrom":{"name":"ListAgentsByStatus","module":"src/elements/list-agents-by-status.ts"}},{"kind":"method","name":"renderHeading","inheritedFrom":{"name":"ListAgentsByStatus","module":"src/elements/list-agents-by-status.ts"}},{"kind":"method","name":"renderAgents","inheritedFrom":{"name":"ListAgentsByStatus","module":"src/elements/list-agents-by-status.ts"}}]}],"exports":[{"kind":"custom-element-definition","name":"list-agents-by-status","declaration":{"name":"LABS","module":"src/definitions/list-agents-by-status.ts"}}]},{"kind":"javascript-module","path":"src/definitions/peer-status-context.ts","declarations":[{"kind":"class","description":"","name":"PSC","superclass":{"name":"PeerStatusContext","module":"/src/elements/peer-status-context"},"tagName":"peer-status-context","customElement":true,"attributes":[{"name":"store","type":{"text":"PeerStatusStore"},"fieldName":"store","inheritedFrom":{"name":"PeerStatusContext","module":"src/elements/peer-status-context.ts"}}],"members":[{"kind":"field","name":"store","type":{"text":"PeerStatusStore"},"attribute":"store","inheritedFrom":{"name":"PeerStatusContext","module":"src/elements/peer-status-context.ts"}}]}],"exports":[{"kind":"custom-element-definition","name":"peer-status-context","declaration":{"name":"PSC","module":"src/definitions/peer-status-context.ts"}}]},{"kind":"javascript-module","path":"src/definitions/peer-status.ts","declarations":[{"kind":"class","description":"","name":"PS","superclass":{"name":"PeerStatus","module":"/src/elements/peer-status"},"tagName":"peer-status","customElement":true,"attributes":[{"name":"agentPubKey","type":{"text":"AgentPubKey"},"description":"REQUIRED. The public key identifying the agent whose presence is going to be shown.","fieldName":"agentPubKey","inheritedFrom":{"name":"PeerStatus","module":"src/elements/peer-status.ts"}}],"members":[{"kind":"field","name":"agentPubKey","type":{"text":"AgentPubKey"},"description":"REQUIRED. The public key identifying the agent whose presence is going to be shown.","attribute":"agentPubKey","inheritedFrom":{"name":"PeerStatus","module":"src/elements/peer-status.ts"}}]}],"exports":[{"kind":"custom-element-definition","name":"peer-status","declaration":{"name":"PS","module":"src/definitions/peer-status.ts"}}]},{"kind":"javascript-module","path":"src/elements/avatar-with-status.ts","declarations":[{"kind":"class","description":"","name":"AvatarWithStatus","members":[{"kind":"field","name":"agentPubKey","type":{"text":"AgentPubKey"},"description":"REQUIRED. The public key identifying the agent whose presence is going to be shown.","attribute":"agentPubKey"},{"kind":"field","name":"scopedElements","static":true}],"attributes":[{"name":"agentPubKey","type":{"text":"AgentPubKey"},"description":"REQUIRED. The public key identifying the agent whose presence is going to be shown.","fieldName":"agentPubKey"}],"mixins":[{"name":"ScopedElementsMixin","package":"@open-wc/scoped-elements"}],"superclass":{"name":"LitElement","package":"lit"},"customElement":true}],"exports":[{"kind":"js","name":"AvatarWithStatus","declaration":{"name":"AvatarWithStatus","module":"src/elements/avatar-with-status.ts"}}]},{"kind":"javascript-module","path":"src/elements/list-agents-by-status.ts","declarations":[{"kind":"class","description":"","name":"ListAgentsByStatus","members":[{"kind":"field","name":"agents","type":{"text":"AgentPubKey[]"},"description":"REQUIRED. The public keys identifying the agents whose presence is going to be shown.","attribute":"agents"},{"kind":"method","name":"renderOnlineAgents","parameters":[{"name":"profiles","type":{"text":"ReadonlyMap<AgentPubKey, Profile | undefined>"}},{"name":"agentPubKeys","type":{"text":"AgentPubKey[]"}}]},{"kind":"method","name":"renderOfflineAgents","parameters":[{"name":"profiles","type":{"text":"ReadonlyMap<AgentPubKey, Profile | undefined>"}},{"name":"agentPubKeys","type":{"text":"AgentPubKey[]"}}]},{"kind":"method","name":"renderHeading"},{"kind":"method","name":"renderAgents"}],"attributes":[{"name":"agents","type":{"text":"AgentPubKey[]"},"description":"REQUIRED. The public keys identifying the agents whose presence is going to be shown.","fieldName":"agents"}],"mixins":[{"name":"ScopedElementsMixin","package":"@open-wc/scoped-elements"}],"superclass":{"name":"LitElement","package":"lit"},"customElement":true}],"exports":[{"kind":"js","name":"ListAgentsByStatus","declaration":{"name":"ListAgentsByStatus","module":"src/elements/list-agents-by-status.ts"}}]},{"kind":"javascript-module","path":"src/elements/peer-status-context.ts","declarations":[{"kind":"class","description":"","name":"PeerStatusContext","members":[{"kind":"field","name":"store","type":{"text":"PeerStatusStore"},"attribute":"store"}],"attributes":[{"name":"store","type":{"text":"PeerStatusStore"},"fieldName":"store"}],"superclass":{"name":"LitElement","package":"lit"},"customElement":true}],"exports":[{"kind":"js","name":"PeerStatusContext","declaration":{"name":"PeerStatusContext","module":"src/elements/peer-status-context.ts"}}]},{"kind":"javascript-module","path":"src/elements/peer-status.ts","declarations":[{"kind":"class","description":"","name":"PeerStatus","members":[{"kind":"field","name":"agentPubKey","type":{"text":"AgentPubKey"},"description":"REQUIRED. The public key identifying the agent whose presence is going to be shown.","attribute":"agentPubKey"}],"attributes":[{"name":"agentPubKey","type":{"text":"AgentPubKey"},"description":"REQUIRED. The public key identifying the agent whose presence is going to be shown.","fieldName":"agentPubKey"}],"mixins":[{"name":"ScopedElementsMixin","package":"@open-wc/scoped-elements"}],"superclass":{"name":"LitElement","package":"lit"},"customElement":true}],"exports":[{"kind":"js","name":"PeerStatus","declaration":{"name":"PeerStatus","module":"src/elements/peer-status.ts"}}]}]}');(0,dist.Bs)(custom_elements_namespaceObject);const parameters={controls:{}},__namedExportsOrder=["parameters"]},"./storybook-config-entry.js":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var dist=__webpack_require__("./node_modules/@storybook/global/dist/index.mjs"),external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("@storybook/preview-api");const external_STORYBOOK_MODULE_CHANNEL_POSTMESSAGE_namespaceObject=__STORYBOOK_MODULE_CHANNEL_POSTMESSAGE__,external_STORYBOOK_MODULE_CHANNEL_WEBSOCKET_namespaceObject=__STORYBOOK_MODULE_CHANNEL_WEBSOCKET__,pipeline=x=>x(),importers=[async path=>{if(!/^\.[\\/](?:stories(?:\/(?!\.)(?:(?:(?!(?:^|\/)\.).)*?)\/|\/|$)(?!\.)(?=.)[^/]*?\.mdx)$/.exec(path))return;const pathRemainder=path.substring(10);return __webpack_require__("./stories lazy recursive ^\\.\\/.*$ include: (?:\\/stories(?:\\/(?%21\\.)(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/%7C\\/%7C$)(?%21\\.)(?=.)[^/]*?\\.mdx)$")("./"+pathRemainder)},async path=>{if(!/^\.[\\/](?:stories(?:\/(?!\.)(?:(?:(?!(?:^|\/)\.).)*?)\/|\/|$)(?!\.)(?=.)[^/]*?\.stories\.(js|jsx|ts|tsx))$/.exec(path))return;const pathRemainder=path.substring(10);return __webpack_require__("./stories lazy recursive ^\\.\\/.*$ include: (?:\\/stories(?:\\/(?%21\\.)(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/%7C\\/%7C$)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$")("./"+pathRemainder)}];const{SERVER_CHANNEL_URL}=dist.global,channel=(0,external_STORYBOOK_MODULE_CHANNEL_POSTMESSAGE_namespaceObject.createChannel)({page:"preview"});if(external_STORYBOOK_MODULE_PREVIEW_API_.addons.setChannel(channel),SERVER_CHANNEL_URL){const serverChannel=(0,external_STORYBOOK_MODULE_CHANNEL_WEBSOCKET_namespaceObject.createChannel)({url:SERVER_CHANNEL_URL});external_STORYBOOK_MODULE_PREVIEW_API_.addons.setServerChannel(serverChannel),window.__STORYBOOK_SERVER_CHANNEL__=serverChannel}const preview=new external_STORYBOOK_MODULE_PREVIEW_API_.PreviewWeb;window.__STORYBOOK_PREVIEW__=preview,window.__STORYBOOK_STORY_STORE__=preview.storyStore,window.__STORYBOOK_ADDONS_CHANNEL__=channel,window.__STORYBOOK_CLIENT_API__=new external_STORYBOOK_MODULE_PREVIEW_API_.ClientApi({storyStore:preview.storyStore}),preview.initialize({importFn:async function importFn(path){for(let i=0;i<importers.length;i++){const moduleExports=await pipeline((()=>importers[i](path)));if(moduleExports)return moduleExports}},getProjectAnnotations:()=>(0,external_STORYBOOK_MODULE_PREVIEW_API_.composeConfigs)([__webpack_require__("./node_modules/@storybook/web-components/preview.js"),__webpack_require__("./node_modules/@storybook/addon-links/dist/preview.js"),__webpack_require__("./node_modules/@storybook/addon-essentials/dist/docs/preview.js"),__webpack_require__("./node_modules/@storybook/addon-essentials/dist/actions/preview.js"),__webpack_require__("./node_modules/@storybook/addon-essentials/dist/backgrounds/preview.js"),__webpack_require__("./node_modules/@storybook/addon-essentials/dist/measure/preview.js"),__webpack_require__("./node_modules/@storybook/addon-essentials/dist/outline/preview.js"),__webpack_require__("./node_modules/@storybook/addon-essentials/dist/highlight/preview.js"),__webpack_require__("./.storybook/preview.js")])})},"./stories lazy recursive ^\\.\\/.*$ include: (?:\\/stories(?:\\/(?%21\\.)(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/%7C\\/%7C$)(?%21\\.)(?=.)[^/]*?\\.mdx)$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./1-introduction.mdx":["./stories/1-introduction.mdx",48,666],"./2.1-backend-setup.mdx":["./stories/2.1-backend-setup.mdx",48,554],"./2.2-coordinator.mdx":["./stories/2.2-coordinator.mdx",48,650],"./3.1-frontend-setup.mdx":["./stories/3.1-frontend-setup.mdx",48,425],"./3.2-peer-status-store.mdx":["./stories/3.2-peer-status-store.mdx",48,724,64]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}));var ids=map[req],id=ids[0];return Promise.all(ids.slice(1).map(__webpack_require__.e)).then((()=>__webpack_require__(id)))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id="./stories lazy recursive ^\\.\\/.*$ include: (?:\\/stories(?:\\/(?%21\\.)(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/%7C\\/%7C$)(?%21\\.)(?=.)[^/]*?\\.mdx)$",module.exports=webpackAsyncContext},"./stories lazy recursive ^\\.\\/.*$ include: (?:\\/stories(?:\\/(?%21\\.)(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/%7C\\/%7C$)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./avatar-with-status.stories":["./stories/avatar-with-status.stories.js",724,680,755],"./avatar-with-status.stories.js":["./stories/avatar-with-status.stories.js",724,680,755],"./list-agents-by-status.stories":["./stories/list-agents-by-status.stories.js",724,680,510],"./list-agents-by-status.stories.js":["./stories/list-agents-by-status.stories.js",724,680,510],"./peer-status.stories":["./stories/peer-status.stories.js",724,680,698],"./peer-status.stories.js":["./stories/peer-status.stories.js",724,680,698]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}));var ids=map[req],id=ids[0];return Promise.all(ids.slice(1).map(__webpack_require__.e)).then((()=>__webpack_require__(id)))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id="./stories lazy recursive ^\\.\\/.*$ include: (?:\\/stories(?:\\/(?%21\\.)(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/%7C\\/%7C$)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$",module.exports=webpackAsyncContext},"@storybook/channels":module=>{"use strict";module.exports=__STORYBOOK_MODULE_CHANNELS__},"@storybook/client-logger":module=>{"use strict";module.exports=__STORYBOOK_MODULE_CLIENT_LOGGER__},"@storybook/core-events":module=>{"use strict";module.exports=__STORYBOOK_MODULE_CORE_EVENTS__},"@storybook/preview-api":module=>{"use strict";module.exports=__STORYBOOK_MODULE_PREVIEW_API__}},__webpack_require__=>{__webpack_require__.O(0,[53],(()=>{return moduleId="./storybook-config-entry.js",__webpack_require__(__webpack_require__.s=moduleId);var moduleId}));__webpack_require__.O()}]);